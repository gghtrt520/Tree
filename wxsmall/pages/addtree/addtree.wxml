<!--pages/addtree.wxml-->
<cu-custom bgColor="bg-gradual-blue" isBack="{{true}}">
  <view slot="backText">返回</view>
  <view slot="content">树木入库</view>
</cu-custom>

<view>
  <view class="cu-form-group">
    <view class="title">
      <text class='text-red'>*</text>树木编码</view>
    <input bindinput='idInput' maxlength='30' placeholder="编码输入"></input>
  </view>
  <view class="cu-form-group">
    <view class="title">
      <text class='text-red'>*</text>树种选择</view>
    <view bindtap="treeSortSelect" id="categoryInd">
      {{categoryInd.name}}
      <text class="cuIcon-right lg text-gray"></text>
    </view>
  </view>
  <view class="cu-form-group">
    <view class="title">
      <text class='text-red'>*</text>养护单位</view>
    <view bindtap="treeSortSelect" id="conservationInd">
      {{conservationInd.name}}
      <text class="cuIcon-right lg text-gray"></text>
    </view>
  </view>
  <view class="cu-form-group">
    <view class="title">
      <text class='text-red'>*</text>施工单位</view>
    <view bindtap="treeSortSelect" id="constructionInd">
      {{constructionInd.name}}
      <text class="cuIcon-right lg text-gray"></text>
    </view>
  </view>
  <view class="cu-form-group">
    <view class="title">
      <text class='text-red'>*</text>产权单位</view>
    <view bindtap="treeSortSelect" id="propertyInd">
      {{propertyInd.name}}
      <text class="cuIcon-right lg text-gray"></text>
    </view>
  </view>
  <view class="cu-bar bg-white margin-top">
		<view class="action">
			<text class='text-red'>*</text>树木照片
		</view>
		<view class="action">
			{{imgList.length}}/4
		</view>
	</view>
	<view class="cu-form-group">
		<view class="grid col-4 grid-square flex-sub">
			<view class="bg-img" wx:for="{{imgList}}" wx:key="{{index}}" bindtap="ViewImage" data-url="{{imgList[index].path}}">
				<image src='{{imgList[index].path}}' mode='aspectFill'></image>
				<view class="cu-tag bg-red" catchtap="DelImg" data-index="{{index}}">
					<text class="cuIcon-close"></text>
				</view>
			</view>
			<view class="solids" bindtap="ChooseImage" wx:if="{{imgList.length<4}}">
				<text class="cuIcon-cameraadd"></text>
			</view>
		</view>
	</view>
  <view class="margin-top cu-bar bg-white">
    <view class="action">
      树木视频
    </view>
  </view>
  <view class="cu-form-group">
    <view class="grid col-2 grid-square flex-sub">
      <view class="solids" bindtap="ChooseVideo" wx:if="{{videoPath==''?true:false}}">
        <text class="cuIcon-record"></text>
      </view>
      <view wx:else class="bg-img">
        <image src='{{videoPath}}' mode='aspectFill'></image>
        <view class="cu-tag bg-red" catchtap="Delvideo">
          <text class="cuIcon-close"></text>
        </view>
      </view>
    </view>
  </view>
  <view class="cu-form-group margin-top align-start">
    <view class="title">其他信息</view>
    <textarea maxlength="200" disabled="{{modalName!=null}}" bindinput="textareaBInput" placeholder="200字以内"></textarea>
  </view>
  <view class="cu-form-group cu-bar bg-white margin-top">
    <view>
      树木定位
    </view>
    <view bindtap='refreshMap'>
      <text class="text-orange">如果定位有误请打开GPS重试</text>
      <text class='cuIcon-refresh text-orange'></text>
    </view>
  </view>
  <map id="myMap" markers="{{[markers]}}" style="width:100%;height:200px;" longitude="{{markers.longitude}}" latitude="{{markers.latitude}}" scale='19'>
  </map>
  <view class="padding">
    <button bindtap='uploadData' class="cu-btn block bg-blue margin-tb-sm lg">
      <text class="cuIcon-upload"></text>上传入库</button>
  </view>
</view>